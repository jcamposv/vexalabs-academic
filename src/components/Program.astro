---
import SectionHeading from './SectionHeading.astro';
import Accordion from './Accordion.astro';

const weeks = [
  {
    title: 'Semana 1 — Fundamentos + Primera Construcción',
    classes: [
      {
        label: 'Clase 1 · Lunes',
        name: 'Fundamentos de AI + Setup',
        items: [
          'Proyectos reales construidos con vibe coding (Nutrixa, GymGo, Mantenix)',
          'Overview del stack: Next.js, Supabase, Tailwind, shadcn/ui, Vercel',
          'Cómo funcionan los LLMs: tokens, ventana de contexto, limitaciones',
          'Estructura de prompts efectivos',
          'Setup de herramientas: Cursor, Claude Code, GitHub',
        ],
      },
      {
        label: 'Clase 2 · Miércoles',
        name: 'Landing Page en Vivo + Intro a Supabase',
        items: [
          'Inspiración de diseño y referencias',
          'Prompting estructurado en ChatGPT',
          'Implementación paso a paso en Claude Code',
          'Refactor limpio del código generado',
          'Introducción a Supabase: base de datos + auth',
          'Deploy a Vercel en vivo',
        ],
        outcome: 'Landing page en producción + sistema de autenticación funcionando',
      },
    ],
  },
  {
    title: 'Semana 2 — SaaS de Inventario (Full Stack)',
    classes: [
      {
        label: 'Clase 3 · Lunes',
        name: 'Inventario SaaS — Parte 1',
        items: [
          'Sistema de autenticación completo',
          'Dashboard administrativo',
          'CRUD de inventario',
          'Schema de PostgreSQL bien diseñado',
          'Row Level Security (RLS) básico en Supabase',
        ],
      },
      {
        label: 'Clase 4 · Miércoles',
        name: 'Inventario SaaS — Parte 2',
        items: [
          'Notificaciones por email con Resend',
          'Manejo de errores robusto',
          'Deployment a producción',
          'Mejores prácticas de código',
        ],
        outcome: 'SaaS de inventario completamente funcional en producción',
      },
    ],
  },
  {
    title: 'Semana 3 — SaaS Elegido por Estudiantes',
    classes: [
      {
        label: 'Clases 5 y 6 · Lunes y Miércoles',
        name: 'SaaS Votado por el Grupo',
        items: [
          'Los estudiantes eligen qué construir: sistema de reservas, CRM, tracker de suscripciones, task manager',
          'Refinamiento avanzado de prompts',
          'Arquitectura limpia desde el prompt',
          'Debugging de output de AI',
          'Mentalidad de producción: no solo que funcione, que funcione BIEN',
        ],
        outcome: 'Tercer SaaS construido + dominio de prompting avanzado',
      },
    ],
  },
  {
    title: 'Semana 4 — SaaS de Salud + Pagos con LemonSqueezy',
    classes: [
      {
        label: 'Clase 7 · Lunes',
        name: 'SaaS de Salud — Construcción Segura',
        items: [
          'Sistema de pacientes',
          'Roles y permisos (admin / staff)',
          'Schema seguro con validaciones',
          'Rutas protegidas por rol',
          'Auth avanzado',
        ],
      },
      {
        label: 'Clase 8 · Miércoles',
        name: 'Pagos y Monetización con LemonSqueezy',
        items: [
          'Qué es LemonSqueezy y por qué usarlo',
          'Productos y modelos de precio (suscripciones, pago único)',
          'Links de checkout integrados',
          'Webhooks: recibir y validar eventos de pago',
          'Manejo de suscripciones (activar, pausar, cancelar)',
          'Proteger rutas y features para usuarios de pago',
          'Lógica de upgrade/downgrade',
          'Deploy a producción con pagos reales',
        ],
        outcome: 'SaaS completo con auth, emails, base de datos, deploy y sistema de pagos. Una app que COBRA dinero.',
      },
    ],
  },
];
---

<section id="programa" class="py-12 sm:py-16" aria-labelledby="program-heading">
  <div class="mx-auto max-w-6xl px-4 sm:px-6">
    <SectionHeading
      label="El programa"
      title="Semana a semana"
      description="Cada semana construís algo real. Para la semana 4 tu app ya cobra dinero."
    />

    <div class="mx-auto max-w-3xl">
      <div class="relative border-l-2 border-brand-200 pl-8">
        {weeks.map((week, wi) => (
          <div class={`relative ${wi < weeks.length - 1 ? 'pb-10' : ''}`}>
            <div class="absolute -left-[calc(2rem+5px)] flex h-3 w-3 items-center justify-center rounded-full bg-brand-500 ring-4 ring-brand-50" aria-hidden="true"></div>

            <Accordion title={week.title} open={wi === 0}>
              {week.classes.map((cls, ci) => (
                <div class={ci > 0 ? 'mt-6 border-t border-border pt-6' : ''}>
                  <div class="mb-3 flex flex-wrap items-center gap-3">
                    <span class="rounded-lg bg-surface-muted px-2.5 py-1 text-xs font-semibold text-text-muted border border-border">
                      {cls.label}
                    </span>
                    <span class="text-sm font-bold text-text">{cls.name}</span>
                  </div>
                  <ul class="space-y-2">
                    {cls.items.map((item) => (
                      <li class="flex items-start gap-2 text-sm">
                        <svg class="mt-0.5 h-4 w-4 shrink-0 text-brand-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" aria-hidden="true">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                        <span>{item}</span>
                      </li>
                    ))}
                  </ul>
                  {cls.outcome && (
                    <div class="mt-4 flex items-start gap-2 rounded-lg bg-brand-50 border border-brand-200 px-3 py-2">
                      <span class="text-brand-500 text-sm font-semibold shrink-0">Resultado:</span>
                      <span class="text-sm text-text">{cls.outcome}</span>
                    </div>
                  )}
                </div>
              ))}
            </Accordion>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

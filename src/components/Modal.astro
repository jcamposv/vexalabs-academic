---
interface Props {
  id: string;
  title: string;
}

const { id, title } = Astro.props;
---

<dialog
  id={id}
  class="fixed inset-0 z-50 m-auto w-[90vw] max-w-2xl rounded-2xl border border-border bg-surface-alt p-0 shadow-2xl backdrop:bg-black/60 backdrop:backdrop-blur-sm open:animate-fade-in"
  aria-labelledby={`${id}-title`}
>
  <div class="flex items-center justify-between border-b border-border px-6 py-4">
    <h3 id={`${id}-title`} class="text-lg font-bold text-text">{title}</h3>
    <button
      class="modal-close flex h-8 w-8 items-center justify-center rounded-lg text-text-muted transition-colors hover:bg-surface-muted hover:text-text focus-visible:outline-2 focus-visible:outline-brand-500 cursor-pointer"
      aria-label="Cerrar"
    >
      <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
  <div class="px-6 py-5 text-text-muted leading-relaxed">
    <slot />
  </div>
</dialog>

<script>
  document.addEventListener('astro:page-load', () => {
    document.querySelectorAll<HTMLButtonElement>('.modal-close').forEach((btn) => {
      btn.addEventListener('click', () => {
        const dialog = btn.closest('dialog');
        dialog?.close();
      });
    });

    document.querySelectorAll('dialog').forEach((dialog) => {
      dialog.addEventListener('click', (e) => {
        if (e.target === dialog) dialog.close();
      });
    });
  });
</script>
